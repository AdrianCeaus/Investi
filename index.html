<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="index.html">Investi</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="index.html">Home</a> 
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="index.html">Tranzactii</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row m-4 p-3">
        <div id="total-wealth" class="col-sm text-center m-2 p-1 summary-col bg-dark">
          <h2><i class="bi bi-bank2"></i></h2>
          <h2>RON 14000</h2>
          <span><i class="bi bi-arrow-up"></i> 5% fata de ziua anterioara</span>
        </div>
        <div id="total-ro" class="col-sm text-center m-2 p-1 summary-col bg-primary">
          <h2><i class="bi bi-graph-up-arrow"></i></h2>
          <h2>6500 RON</h2>
          <span><i class="bi bi-arrow-up"></i> 2% fata de ziua anterioara</span>
        </div>
        <div id="total-ext" class="col-sm text-center m-2 p-1 summary-col bg-success">
          <h2><i class="bi bi-bar-chart-line-fill"></i></h2>
          <h2>7899 RON</h2>
          <span><i class="bi bi-arrow-down"></i> -2% fata de ziua anterioara</span>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row m-4">
        <div id="treemap-detineri"></div>
      </div>
    </div>
    <div class="container">
      <div class="row grafic align-items-center">
        <div id="detineri-categorii" class="col-sm-4 grafic"></div>
        <div class="col-sm">
          <table class="table text-center table-striped">
            <thead>
              <tr>
                <th scope="col"><i class="bi bi-bank"></i> Tip</th>
                <th scope="col"><i class="bi bi-cash"></i> Valoare</th>
                <th scope="col"><i class="bi bi-percent"></i> Tinta</th>
                <th scope="col"><i class="bi bi-cash"></i> Valoare Tinta</th>
                <th scope="col"><i class="bi bi-cash"></i> Diferenta</th>
              </tr>
            </thead>
            <tbody id = 'procent-investitii'>
            </tbody>
          </table>
        </div>
      </div>
    <div class="container">
      <div class="row grafic align-items-center">
        <div id="variatie-profit" class="col-sm-3 grafic"></div>
        <div id="variatie-investitie" class="col-sm-3 grafic"></div>
        <div class="col-sm">
          <table class="table text-center table-striped">
            <thead>
              <tr>
                <th scope="col"><i class="bi bi-bank"></i> Tip</th>
                <th scope="col"><i class="bi bi-cash"></i> Profit potential</th>
                <th scope="col"><i class="bi bi-cash"></i> Profit marcat</th>
                <th scope="col"><i class="bi bi-cash"></i> Investitie</th>
                <th scope="col"><i class="bi bi-percent"></i> Profitabilitate anuala</th>
              </tr>
            </thead>
            <tbody id = 'profit-investitii'>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row grafic">
        <div class="col-sm-6 grafic">
          <select class="form-select" aria-label="pie-chart-variatie">
            <option selected value="bvb">bvb</option>
            <option value="etf">etf</option>
            <option value="piete">piete</option>
            <option value="sector">sector</option>
          </select>
          <div id="variatie-activ"></div>
        </div>
        <div  class="col-sm-6 grafic">
          <select class="form-select" id = "categorySelect" onchange="handleCategoryChange()" aria-label="pie-chart-detineri">
            <option selected value="bvb">bvb</option>
            <option value="etf">etf</option>
            <option value="piete">piete</option>
            <option value="sector">sector</option>
          </select>
          <div id="chart-detineri"></div>
        </div>
      </div>
    </div>
      <div class="row grafic">
        
      </div>
      <!--<div class="row grafic">
        <div id="detineri-bvb" class="col-sm grafic"></div>
        <div id="detineri-etf" class="col-sm grafic"></div>
        <div id="detineri-piete" class="col-sm grafic"></div>
      </div>-->
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

    
    //data
    let categoriiDetineri = [
            ['Bursa', 29.4],
            ["Depozite", 37.7],
            ["Economii", 5.3],
            ["Titluri", 15.1],
            ["ETF", 12.6]
        ]
    let detineriETF = [
        ['VUAA', 50],
        ["IS3N", 5],
        ["VWCG", 40],
        ["AAKI", 5],
    ]

    let detineriBVB = [
          ['MCAB', 0.3],
          ["TEL", 4.7],
          ["SNG", 14.7],
          ["H2O", 24.7],
          ["TLV", 11.7],
          ["BRD", 5.4],
          ["DIGI", 7.1],
          ["SNP", 31.1],
    ]

    let detineriPiete = [
          ['Europe', 20],
          ["Romania", 50],
          ["SUA", 20],
          ["ASIA", 10],
    ]

    let detineriSector = [
          ['Energie', 20],
          ["Financiar", 50],
          ["Comunicare", 20],
          ["Altele", 10],
    ]


    let tipInvestitie = [
          {tip:'Bursa', valoare: 12000, efectiv: 38.34, tinta: 45, valTinta: 12333 , diferenta: 333},
          {tip:'ETF', valoare:1600, efectiv: 12.34, tinta: 20, valTinta: 1333, diferenta: 123},
          {tip:'Economii', valoare:1000, efectiv: 7.34, tinta: 15, valTinta: 256, diferenta: 23},
          {tip:'Titluri', valoare:800, efectiv: 10.34, tinta: 10, valTinta: 1333, diferenta: 123},
          {tip:'Depozite', valoare:16000, efectiv: 22.34, tinta: 10, valTinta: 13330, diferenta: 885},
    ]

    let profitInvestitii = [
          {tip:'Bursa', profitPotential: 1200, profitMarcat: 380.34, investitie: 21443, profitAnuala: 4.5},
          {tip:'ETF', profitPotential: 200, profitMarcat: 180.34, investitie: 7255, profitAnuala: 1.5},
          {tip:'Economii', profitPotential: 358, profitMarcat: 2380.34, investitie: 10000, profitAnuala: 14.7,},
          {tip:'Titluri', profitPotential: 1210, profitMarcat: 80.34, investitie: 11443, profitAnuala: 2.5,},
          {tip:'Depozite', profitPotential: 100, profitMarcat: 580.34, investitie: 71443, profitAnuala: 3.6,},
    ]

  // Set options for pie chart.
    var pieChartOptions = { title: '',
              chartArea: { width:"100%" },
              width: "100%",
              height: 450,
              legend: { position:'bottom' },
              is3D: true,
              titleTextStyle: { fontSize: 20, color: 'red' },
              sliceVisibilityThreshold: 0.05
              };

      

    function handleCategoryChange() {
      const selectedCategory = document.getElementById('categorySelect').value;
      let piechartData = '';
      let pieChartTitle = '';
      switch (selectedCategory) {
        case "etf":
          piechartData = detineriETF
          pieChartTitle = "Procentaj detineri ETF"
          break;
        case "piete":
          piechartData = detineriPiete
          pieChartTitle = "Procentaj detineri pe piete"
          break;
        case "sector":
          piechartData = detineriSector
          pieChartTitle = "Procentaj detineri pe sector BVB"
          break;
        default:
        piechartData = detineriBVB
        pieChartTitle = "Procentaj detineri pe BVB"
      }
      google.charts.setOnLoadCallback(function () {drawPieChart(piechartData, pieChartOptions, 'chart-detineri', pieChartTitle)});
    }

      // Load Charts and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      let pieChartTitle = "Procentaj detineri pe BVB"
      let piechartData = detineriBVB 
      // Draw the pie chart when Charts is loaded.
      google.charts.setOnLoadCallback(function () {drawPieChart(categoriiDetineri, pieChartOptions, 'detineri-categorii', 'Procentaj pe tip de investitie')});
      google.charts.setOnLoadCallback(function () {drawPieChart(piechartData, pieChartOptions, 'chart-detineri', pieChartTitle)});
      google.charts.setOnLoadCallback(drawVaritatieProfit);
      google.charts.setOnLoadCallback(drawVariatieActiv);
      google.charts.setOnLoadCallback(drawVaritatieInvestitie);
      // Callback that draws the pie chart
      
      

      drawTableTipInvestitie(tipInvestitie);
      drawTableProfitInvestitie (profitInvestitii);

      function drawTableTipInvestitie (array) {

        let tableContent = ''
        array.forEach(element => {
          
          tableContent = tableContent + '<tr><td>' + element.tip + '</td><td>' + element.valoare + '</td><td>' +
            element.tinta + '</td><td>' + element.valTinta + '</td><td>' + element.diferenta + '</td></tr>'
        
        });
        
        document.getElementById('procent-investitii').innerHTML = tableContent

      }

      function drawTableProfitInvestitie (array) {

      let tableContent = ''
      array.forEach(element => {
        tableContent = tableContent + '<tr><td>' + element.tip + '</td><td>' + element.profitPotential + '</td><td>' +
          element.profitMarcat + '</td><td>' + element.investitie + '</td><td>' + element.profitAnuala + '</td></tr>'
      });
      document.getElementById('profit-investitii').innerHTML = tableContent
    }

      

      function drawPieChart (pieChartData, pieChartOptions, divName, pieChartName) {

        // Create the data table
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Actiune');
        data.addColumn('number', 'Slices');
        data.addRows(pieChartData);
        // Set the name
        pieChartOptions.title = pieChartName;

        // Instantiate and draw the chart
        var chart = new google.visualization.PieChart(document.getElementById(divName));
        chart.draw(data, pieChartOptions);
      }

      function drawVaritatieProfit() {

      var data = new google.visualization.DataTable();
      data.addColumn('date', 'Data');
      data.addColumn('number', 'Profit');

      data.addRows([
        [new Date(2025,1,1), 1250],   [new Date(2025,1,2), 1336],  [new Date(2025,1,3), 1122],  [new Date(2025,1,4), 1700],  [new Date(2025,1,6), 1825],  [new Date(2025,1,7), 1444],
        [new Date(2025,1,8), 1350],   [new Date(2025,1,9), 1436],  [new Date(2025,1,10), 1322],  [new Date(2025,1,11), 1500],  [new Date(2025,1,12), 1625],  [new Date(2025,1,13), 1454],
      ]);

      var options = {
        hAxis: {
          title: 'Data',
          format: 'YY-MM-dd'
        },
        vAxis: {
          title: 'Valoare'
        },
        height: 450,
        chartArea: {
        width:"90%"
        },
        title: "Variatie Profit",
        titleTextStyle: {fontSize:20,color:'red'},
        
      };

      var chart = new google.visualization.LineChart(document.getElementById('variatie-profit'));

      chart.draw(data, options);
      }

      function drawVaritatieInvestitie() {

        var data = new google.visualization.DataTable();
        data.addColumn('date', 'Luna');
        data.addColumn('number', 'Investitie');

        data.addRows([
          [new Date(2025,2,1), 1250],   [new Date(2025,2,2), 1336],  [new Date(2025,3,3), 1122],  [new Date(2025,4,4), 1700],  [new Date(2025,5,6), 1825],  [new Date(2025,6,7), 1444]
        ]);

        var options = {
          hAxis: {
            title: 'Data',
            format: 'YY-MM'
          },
          vAxis: {
            title: 'Valoare'
          },
          height: 450,
          chartArea: {
          width:"90%"
          },
          title: "Variatie Investitie",
          titleTextStyle: {fontSize:20,color:'red'},
          
        };

var chart = new google.visualization.LineChart(document.getElementById('variatie-investitie'));

chart.draw(data, options);
}
      
      function drawVariatieActiv() {
      var data = google.visualization.arrayToDataTable([
        ["Actiune", "Variatie pe activ", { role: "style" } ],
        ["SNP", -8.94, "#b87333"],
        ["SNN", 10.49, "silver"],
        ["H2O", -19.30, "gold"],
        ["SSS", 21.45, "green"],
        ["UTF", 11.5, "red"],
        ["RED", -10.45, "blue"],
        ["RRS", 1.45, "grey"],
      ]);

      var view = new google.visualization.DataView(data);
      view.setColumns([0, 1,
                       { calc: "stringify",
                         sourceColumn: 1,
                         type: "string",
                         role: "annotation" },
                       2]);

      var options = {
        chartArea: {width:"100%"},
        title: "Variatie pe activ",
        titleTextStyle: {fontSize:20,color:'red'},
        width: "100%",
        height: 500,
        bar: {groupWidth: "90%"},
        legend: { position: "none"},
      };
      var chart = new google.visualization.ColumnChart(document.getElementById("variatie-activ"));
      chart.draw(view, options);
  }

  google.charts.load('current', {'packages':['treemap']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Actiune', 'Tip', 'Market Value', 'Value increase/decrease'],
          ['Global',    null,                 0,                               0],
          ['BVB -2%',   'Global',            0,                             0],
          ['ETF -1%',    'Global',             0,                              0],
          ['SNP 2.48%',    'BVB -2%',           29.23,                              2.48],
          ['SNN -0.21%',       'BVB -2%',            7,                              -0.21],
          ['H2O 0.27%',    'BVB -2%',            23.24,                              0.27],
          ['MCAB -5%',    'BVB -2%',            0.28,                              -5],
          ['BRD 6.65%',    'BVB -2%',            5.07,                              6.65],
          ['DIGI 5.71%',    'BVB -2%',            6.57,                              5.71],
          ['TLV 9.57%',    'BVB -2%',            11.23,                              9.57],
          ['SNG 16.84%',    'BVB -2%',            14.18,                              16.84],
          ['TEL 8.08%',    'BVB -2%',            4.18,                              8.08],
          ['America 10%',    'ETF -1%',             41.42,                              10],
          ['Europe -2%',   'ETF -1%',             13.53,                              -2],
          ['Asia -10%',    'ETF -1%',             36.88,                              -10],
          ['AI&ROB 4%',     'ETF -1%',             8.17,                              4]

        ]);
        tree = new google.visualization.TreeMap(document.getElementById('treemap-detineri'));

        tree.draw(data, {
          minColor: '#f00',
          maxColor: '#0d0',
          minColorValue: -30,
          maxColorValue: 30,
          headerHeight: 25,
          fontColor: 'black',
          showScale: true,
          height: 250,
          generateTooltip: showFullTooltip,
          eventsConfig: {
              rollup: ['dblclick'],
              drilldown: ['click']
          }
        });
        
  function showFullTooltip(row, size, value) {
    return '<div style="background:#fd9; padding:10px; border-style:solid">' +
           '<span style="font-family:Courier"><b>' + data.getValue(row, 0) +
           '</b>, ' + data.getValue(row, 2) +
           ', ' + data.getValue(row, 3) + '</span><br>'
  }

      }
    </script>


    </script>



        
  </body>
</html>